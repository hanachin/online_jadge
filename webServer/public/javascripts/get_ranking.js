// Generated by CoffeeScript 1.4.0
var get_ranking;

$(function() {
  return get_ranking();
});

get_ranking = function() {
  var ac_temp, table_tmp, timerID, wa_temp;
  table_tmp = "<table class=\"table table-bordered\" style=\"padding: 20px; width: 1030px; margin: auto; margin-top: 15px;\">\n  <tbody id=\"list\">\n    <tr style=\"background-color: #E8E8E8;\">\n      <td>ユーザ名</td>\n      <td>問題名</td>\n      <td>解答状況</td>\n      <td>送信時間</td>\n    </tr>\n  </tbody>\n</table>'";
  ac_temp = '<img src="images/ac.png" alt="ac" style="height: 30%;"><span style="margin-left: 1em;">正解</span>';
  wa_temp = '<img src="images/wa.png" alt="wa" style="height: 30%;"><span style="margin-left: 1em;">未正解</span>';
  $.ajax({
    url: "/get_ranking",
    type: "get",
    dataType: 'text',
    cache: true
  }).done(function(data) {
    var date, fullyear, obj, resJSON, table_calum, time, _i, _len;
    resJSON = $.parseJSON(data);
    $('#status').html(table_tmp);
    table_calum = "";
    for (_i = 0, _len = resJSON.length; _i < _len; _i++) {
      obj = resJSON[_i];
      date = obj.time.split('T');
      time = date[1].split('.000Z')[0];
      fullyear = date[0];
      table_calum += "<tr>\n  <td>" + obj.username + "</td>\n  <td>" + obj.volumeNo + "</td>\n  <td>" + obj.result + "</td>\n  <td><time>" + fullyear + " " + time + "</time></td>\n</tr>";
    }
    return $('#list').append(table_calum);
  }).fail(function() {
    return alert('サーバ通信エラー');
  });
  return timerID = setTimeout(get_ranking, 3000);
};
